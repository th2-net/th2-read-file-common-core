buildscript {
    repositories {
        gradlePluginPortal()
        maven {
            url = "https://s01.oss.sonatype.org/content/repositories/snapshots/"
        }
    }
    dependencies {
        classpath "com.exactpro.th2:th2-gradle-plugin:0.0.1-dev-5915968839-41381e5-SNAPSHOT"
    }
}

plugins {
    id 'org.jetbrains.dokka' version '1.8.20'
}

apply plugin: "com.exactpro.th2.common-conventions"
apply plugin: "com.exactpro.th2.artifacts-conventions"

javadocJar {
    dependsOn(dokkaJavadoc)
    from(dokkaJavadoc.outputDirectory)
}

dependencies {
    api platform('com.exactpro.th2:bom:4.5.0')
    implementation "com.exactpro.th2:common:5.7.1-dev"
    implementation "com.exactpro.th2:common-utils:2.2.0-dev"
    api "com.exactpro.th2:grpc-common:4.3.0-dev"

    implementation "com.google.guava:guava"
    implementation "org.apache.commons:commons-lang3"

    implementation('io.prometheus:simpleclient') {
        because('performance metric for grafana')
    }

    dokkaJavadocPlugin "org.jetbrains.dokka:kotlin-as-java-plugin"
}

test {
    testLogging {
        showStandardStreams = true
    }
}

dependencyLocking {
    lockAllConfigurations()
}